package org.reborn.FeatherDisguise.distributors.impl;

import com.github.retrooper.packetevents.event.simple.PacketPlaySendEvent;
import com.github.retrooper.packetevents.wrapper.PacketWrapper;
import com.github.retrooper.packetevents.wrapper.play.server.WrapperPlayServerPlayerInfo;
import org.bukkit.entity.Player;
import org.jetbrains.annotations.NotNull;
import org.reborn.FeatherDisguise.distributors.DisguiseListenerDistributor;
import org.reborn.FeatherDisguise.distributors.IDisguisePacketDistributor;
import org.reborn.FeatherDisguise.types.AbstractDisguise;

public class DisguisePacketPlayerInfoDistributor implements IDisguisePacketDistributor {

    @Override
    public void handlePacketInterception(@NotNull PacketPlaySendEvent packetSendEvent, @NotNull PacketWrapper<?> interceptedPacket,
                                         @NotNull AbstractDisguise<?> disguise, @NotNull Player observer, @NotNull DisguiseListenerDistributor disguiseListenerDistributor) {

        if (!(interceptedPacket instanceof WrapperPlayServerPlayerInfo)) return;
//        final WrapperPlayServerPlayerInfo playerInfoPacket = (WrapperPlayServerPlayerInfo) interceptedPacket;
//
//        if (playerInfoPacket.getAction() != WrapperPlayServerPlayerInfo.Action.UPDATE_GAME_MODE) return;
//
//        packetSendEvent.markForReEncode(false);
//        packetSendEvent.setCancelled(true);
    }
}
